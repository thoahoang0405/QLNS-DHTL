{"ast":null,"code":"/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\n\n\"use strict\";\n\nconst forEachBail = require(\"./forEachBail\");\n\n/** @typedef {import(\"./Resolver\")} Resolver */\n/** @typedef {import(\"./Resolver\").ResolveContext} ResolveContext */\n\n/**\r\n * @typedef {Object} DescriptionFileInfo\r\n * @property {any=} content\r\n * @property {string} path\r\n * @property {string} directory\r\n */\n\n/**\r\n * @callback ErrorFirstCallback\r\n * @param {Error|null=} error\r\n * @param {DescriptionFileInfo=} result\r\n */\n\n/**\r\n * @param {Resolver} resolver resolver\r\n * @param {string} directory directory\r\n * @param {string[]} filenames filenames\r\n * @param {DescriptionFileInfo|undefined} oldInfo oldInfo\r\n * @param {ResolveContext} resolveContext resolveContext\r\n * @param {ErrorFirstCallback} callback callback\r\n */\nfunction loadDescriptionFile(resolver, directory, filenames, oldInfo, resolveContext, callback) {\n  (function findDescriptionFile() {\n    if (oldInfo && oldInfo.directory === directory) {\n      // We already have info for this directory and can reuse it\n      return callback(null, oldInfo);\n    }\n    forEachBail(filenames, (filename, callback) => {\n      const descriptionFilePath = resolver.join(directory, filename);\n      if (resolver.fileSystem.readJson) {\n        resolver.fileSystem.readJson(descriptionFilePath, (err, content) => {\n          if (err) {\n            if (typeof err.code !== \"undefined\") {\n              if (resolveContext.missingDependencies) {\n                resolveContext.missingDependencies.add(descriptionFilePath);\n              }\n              return callback();\n            }\n            if (resolveContext.fileDependencies) {\n              resolveContext.fileDependencies.add(descriptionFilePath);\n            }\n            return onJson(err);\n          }\n          if (resolveContext.fileDependencies) {\n            resolveContext.fileDependencies.add(descriptionFilePath);\n          }\n          onJson(null, content);\n        });\n      } else {\n        resolver.fileSystem.readFile(descriptionFilePath, (err, content) => {\n          if (err) {\n            if (resolveContext.missingDependencies) {\n              resolveContext.missingDependencies.add(descriptionFilePath);\n            }\n            return callback();\n          }\n          if (resolveContext.fileDependencies) {\n            resolveContext.fileDependencies.add(descriptionFilePath);\n          }\n          let json;\n          if (content) {\n            try {\n              json = JSON.parse(content.toString());\n            } catch (e) {\n              return onJson(e);\n            }\n          } else {\n            return onJson(new Error(\"No content in file\"));\n          }\n          onJson(null, json);\n        });\n      }\n      function onJson(err, content) {\n        if (err) {\n          if (resolveContext.log) resolveContext.log(descriptionFilePath + \" (directory description file): \" + err);else err.message = descriptionFilePath + \" (directory description file): \" + err;\n          return callback(err);\n        }\n        callback(null, {\n          content,\n          directory,\n          path: descriptionFilePath\n        });\n      }\n    }, (err, result) => {\n      if (err) return callback(err);\n      if (result) {\n        return callback(null, result);\n      } else {\n        const dir = cdUp(directory);\n        if (!dir) {\n          return callback();\n        } else {\n          directory = dir;\n          return findDescriptionFile();\n        }\n      }\n    });\n  })();\n}\n\n/**\r\n * @param {any} content content\r\n * @param {string|string[]} field field\r\n * @returns {object|string|number|boolean|undefined} field data\r\n */\nfunction getField(content, field) {\n  if (!content) return undefined;\n  if (Array.isArray(field)) {\n    let current = content;\n    for (let j = 0; j < field.length; j++) {\n      if (current === null || typeof current !== \"object\") {\n        current = null;\n        break;\n      }\n      current = current[field[j]];\n    }\n    return current;\n  } else {\n    return content[field];\n  }\n}\n\n/**\r\n * @param {string} directory directory\r\n * @returns {string|null} parent directory or null\r\n */\nfunction cdUp(directory) {\n  if (directory === \"/\") return null;\n  const i = directory.lastIndexOf(\"/\"),\n    j = directory.lastIndexOf(\"\\\\\");\n  const p = i < 0 ? j : j < 0 ? i : i < j ? j : i;\n  if (p < 0) return null;\n  return directory.substr(0, p || 1);\n}\nexports.loadDescriptionFile = loadDescriptionFile;\nexports.getField = getField;\nexports.cdUp = cdUp;","map":{"version":3,"names":["forEachBail","require","loadDescriptionFile","resolver","directory","filenames","oldInfo","resolveContext","callback","findDescriptionFile","filename","descriptionFilePath","join","fileSystem","readJson","err","content","code","missingDependencies","add","fileDependencies","onJson","readFile","json","JSON","parse","toString","e","Error","log","message","path","result","dir","cdUp","getField","field","undefined","Array","isArray","current","j","length","i","lastIndexOf","p","substr","exports"],"sources":["D:/dhtl/ptda/UI/QLNS-DHTL/node_modules/enhanced-resolve/lib/DescriptionFileUtils.js"],"sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n\r\n\"use strict\";\r\n\r\nconst forEachBail = require(\"./forEachBail\");\r\n\r\n/** @typedef {import(\"./Resolver\")} Resolver */\r\n/** @typedef {import(\"./Resolver\").ResolveContext} ResolveContext */\r\n\r\n/**\r\n * @typedef {Object} DescriptionFileInfo\r\n * @property {any=} content\r\n * @property {string} path\r\n * @property {string} directory\r\n */\r\n\r\n/**\r\n * @callback ErrorFirstCallback\r\n * @param {Error|null=} error\r\n * @param {DescriptionFileInfo=} result\r\n */\r\n\r\n/**\r\n * @param {Resolver} resolver resolver\r\n * @param {string} directory directory\r\n * @param {string[]} filenames filenames\r\n * @param {DescriptionFileInfo|undefined} oldInfo oldInfo\r\n * @param {ResolveContext} resolveContext resolveContext\r\n * @param {ErrorFirstCallback} callback callback\r\n */\r\nfunction loadDescriptionFile(\r\n\tresolver,\r\n\tdirectory,\r\n\tfilenames,\r\n\toldInfo,\r\n\tresolveContext,\r\n\tcallback\r\n) {\r\n\t(function findDescriptionFile() {\r\n\t\tif (oldInfo && oldInfo.directory === directory) {\r\n\t\t\t// We already have info for this directory and can reuse it\r\n\t\t\treturn callback(null, oldInfo);\r\n\t\t}\r\n\t\tforEachBail(\r\n\t\t\tfilenames,\r\n\t\t\t(filename, callback) => {\r\n\t\t\t\tconst descriptionFilePath = resolver.join(directory, filename);\r\n\t\t\t\tif (resolver.fileSystem.readJson) {\r\n\t\t\t\t\tresolver.fileSystem.readJson(descriptionFilePath, (err, content) => {\r\n\t\t\t\t\t\tif (err) {\r\n\t\t\t\t\t\t\tif (typeof err.code !== \"undefined\") {\r\n\t\t\t\t\t\t\t\tif (resolveContext.missingDependencies) {\r\n\t\t\t\t\t\t\t\t\tresolveContext.missingDependencies.add(descriptionFilePath);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn callback();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (resolveContext.fileDependencies) {\r\n\t\t\t\t\t\t\t\tresolveContext.fileDependencies.add(descriptionFilePath);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn onJson(err);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (resolveContext.fileDependencies) {\r\n\t\t\t\t\t\t\tresolveContext.fileDependencies.add(descriptionFilePath);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonJson(null, content);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresolver.fileSystem.readFile(descriptionFilePath, (err, content) => {\r\n\t\t\t\t\t\tif (err) {\r\n\t\t\t\t\t\t\tif (resolveContext.missingDependencies) {\r\n\t\t\t\t\t\t\t\tresolveContext.missingDependencies.add(descriptionFilePath);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn callback();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (resolveContext.fileDependencies) {\r\n\t\t\t\t\t\t\tresolveContext.fileDependencies.add(descriptionFilePath);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet json;\r\n\r\n\t\t\t\t\t\tif (content) {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tjson = JSON.parse(content.toString());\r\n\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\treturn onJson(e);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn onJson(new Error(\"No content in file\"));\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tonJson(null, json);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction onJson(err, content) {\r\n\t\t\t\t\tif (err) {\r\n\t\t\t\t\t\tif (resolveContext.log)\r\n\t\t\t\t\t\t\tresolveContext.log(\r\n\t\t\t\t\t\t\t\tdescriptionFilePath + \" (directory description file): \" + err\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\terr.message =\r\n\t\t\t\t\t\t\t\tdescriptionFilePath + \" (directory description file): \" + err;\r\n\t\t\t\t\t\treturn callback(err);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcallback(null, {\r\n\t\t\t\t\t\tcontent,\r\n\t\t\t\t\t\tdirectory,\r\n\t\t\t\t\t\tpath: descriptionFilePath\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t(err, result) => {\r\n\t\t\t\tif (err) return callback(err);\r\n\t\t\t\tif (result) {\r\n\t\t\t\t\treturn callback(null, result);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst dir = cdUp(directory);\r\n\t\t\t\t\tif (!dir) {\r\n\t\t\t\t\t\treturn callback();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdirectory = dir;\r\n\t\t\t\t\t\treturn findDescriptionFile();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t})();\r\n}\r\n\r\n/**\r\n * @param {any} content content\r\n * @param {string|string[]} field field\r\n * @returns {object|string|number|boolean|undefined} field data\r\n */\r\nfunction getField(content, field) {\r\n\tif (!content) return undefined;\r\n\tif (Array.isArray(field)) {\r\n\t\tlet current = content;\r\n\t\tfor (let j = 0; j < field.length; j++) {\r\n\t\t\tif (current === null || typeof current !== \"object\") {\r\n\t\t\t\tcurrent = null;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcurrent = current[field[j]];\r\n\t\t}\r\n\t\treturn current;\r\n\t} else {\r\n\t\treturn content[field];\r\n\t}\r\n}\r\n\r\n/**\r\n * @param {string} directory directory\r\n * @returns {string|null} parent directory or null\r\n */\r\nfunction cdUp(directory) {\r\n\tif (directory === \"/\") return null;\r\n\tconst i = directory.lastIndexOf(\"/\"),\r\n\t\tj = directory.lastIndexOf(\"\\\\\");\r\n\tconst p = i < 0 ? j : j < 0 ? i : i < j ? j : i;\r\n\tif (p < 0) return null;\r\n\treturn directory.substr(0, p || 1);\r\n}\r\n\r\nexports.loadDescriptionFile = loadDescriptionFile;\r\nexports.getField = getField;\r\nexports.cdUp = cdUp;\r\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,YAAY;;AAEZ,MAAMA,WAAW,GAAGC,OAAO,CAAC,eAAe,CAAC;;AAE5C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,mBAAmBA,CAC3BC,QAAQ,EACRC,SAAS,EACTC,SAAS,EACTC,OAAO,EACPC,cAAc,EACdC,QAAQ,EACP;EACD,CAAC,SAASC,mBAAmBA,CAAA,EAAG;IAC/B,IAAIH,OAAO,IAAIA,OAAO,CAACF,SAAS,KAAKA,SAAS,EAAE;MAC/C;MACA,OAAOI,QAAQ,CAAC,IAAI,EAAEF,OAAO,CAAC;IAC/B;IACAN,WAAW,CACVK,SAAS,EACT,CAACK,QAAQ,EAAEF,QAAQ,KAAK;MACvB,MAAMG,mBAAmB,GAAGR,QAAQ,CAACS,IAAI,CAACR,SAAS,EAAEM,QAAQ,CAAC;MAC9D,IAAIP,QAAQ,CAACU,UAAU,CAACC,QAAQ,EAAE;QACjCX,QAAQ,CAACU,UAAU,CAACC,QAAQ,CAACH,mBAAmB,EAAE,CAACI,GAAG,EAAEC,OAAO,KAAK;UACnE,IAAID,GAAG,EAAE;YACR,IAAI,OAAOA,GAAG,CAACE,IAAI,KAAK,WAAW,EAAE;cACpC,IAAIV,cAAc,CAACW,mBAAmB,EAAE;gBACvCX,cAAc,CAACW,mBAAmB,CAACC,GAAG,CAACR,mBAAmB,CAAC;cAC5D;cACA,OAAOH,QAAQ,EAAE;YAClB;YACA,IAAID,cAAc,CAACa,gBAAgB,EAAE;cACpCb,cAAc,CAACa,gBAAgB,CAACD,GAAG,CAACR,mBAAmB,CAAC;YACzD;YACA,OAAOU,MAAM,CAACN,GAAG,CAAC;UACnB;UACA,IAAIR,cAAc,CAACa,gBAAgB,EAAE;YACpCb,cAAc,CAACa,gBAAgB,CAACD,GAAG,CAACR,mBAAmB,CAAC;UACzD;UACAU,MAAM,CAAC,IAAI,EAAEL,OAAO,CAAC;QACtB,CAAC,CAAC;MACH,CAAC,MAAM;QACNb,QAAQ,CAACU,UAAU,CAACS,QAAQ,CAACX,mBAAmB,EAAE,CAACI,GAAG,EAAEC,OAAO,KAAK;UACnE,IAAID,GAAG,EAAE;YACR,IAAIR,cAAc,CAACW,mBAAmB,EAAE;cACvCX,cAAc,CAACW,mBAAmB,CAACC,GAAG,CAACR,mBAAmB,CAAC;YAC5D;YACA,OAAOH,QAAQ,EAAE;UAClB;UACA,IAAID,cAAc,CAACa,gBAAgB,EAAE;YACpCb,cAAc,CAACa,gBAAgB,CAACD,GAAG,CAACR,mBAAmB,CAAC;UACzD;UACA,IAAIY,IAAI;UAER,IAAIP,OAAO,EAAE;YACZ,IAAI;cACHO,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACT,OAAO,CAACU,QAAQ,EAAE,CAAC;YACtC,CAAC,CAAC,OAAOC,CAAC,EAAE;cACX,OAAON,MAAM,CAACM,CAAC,CAAC;YACjB;UACD,CAAC,MAAM;YACN,OAAON,MAAM,CAAC,IAAIO,KAAK,CAAC,oBAAoB,CAAC,CAAC;UAC/C;UAEAP,MAAM,CAAC,IAAI,EAAEE,IAAI,CAAC;QACnB,CAAC,CAAC;MACH;MAEA,SAASF,MAAMA,CAACN,GAAG,EAAEC,OAAO,EAAE;QAC7B,IAAID,GAAG,EAAE;UACR,IAAIR,cAAc,CAACsB,GAAG,EACrBtB,cAAc,CAACsB,GAAG,CACjBlB,mBAAmB,GAAG,iCAAiC,GAAGI,GAAG,CAC7D,CAAC,KAEFA,GAAG,CAACe,OAAO,GACVnB,mBAAmB,GAAG,iCAAiC,GAAGI,GAAG;UAC/D,OAAOP,QAAQ,CAACO,GAAG,CAAC;QACrB;QACAP,QAAQ,CAAC,IAAI,EAAE;UACdQ,OAAO;UACPZ,SAAS;UACT2B,IAAI,EAAEpB;QACP,CAAC,CAAC;MACH;IACD,CAAC,EACD,CAACI,GAAG,EAAEiB,MAAM,KAAK;MAChB,IAAIjB,GAAG,EAAE,OAAOP,QAAQ,CAACO,GAAG,CAAC;MAC7B,IAAIiB,MAAM,EAAE;QACX,OAAOxB,QAAQ,CAAC,IAAI,EAAEwB,MAAM,CAAC;MAC9B,CAAC,MAAM;QACN,MAAMC,GAAG,GAAGC,IAAI,CAAC9B,SAAS,CAAC;QAC3B,IAAI,CAAC6B,GAAG,EAAE;UACT,OAAOzB,QAAQ,EAAE;QAClB,CAAC,MAAM;UACNJ,SAAS,GAAG6B,GAAG;UACf,OAAOxB,mBAAmB,EAAE;QAC7B;MACD;IACD,CAAC,CACD;EACF,CAAC,GAAG;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS0B,QAAQA,CAACnB,OAAO,EAAEoB,KAAK,EAAE;EACjC,IAAI,CAACpB,OAAO,EAAE,OAAOqB,SAAS;EAC9B,IAAIC,KAAK,CAACC,OAAO,CAACH,KAAK,CAAC,EAAE;IACzB,IAAII,OAAO,GAAGxB,OAAO;IACrB,KAAK,IAAIyB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGL,KAAK,CAACM,MAAM,EAAED,CAAC,EAAE,EAAE;MACtC,IAAID,OAAO,KAAK,IAAI,IAAI,OAAOA,OAAO,KAAK,QAAQ,EAAE;QACpDA,OAAO,GAAG,IAAI;QACd;MACD;MACAA,OAAO,GAAGA,OAAO,CAACJ,KAAK,CAACK,CAAC,CAAC,CAAC;IAC5B;IACA,OAAOD,OAAO;EACf,CAAC,MAAM;IACN,OAAOxB,OAAO,CAACoB,KAAK,CAAC;EACtB;AACD;;AAEA;AACA;AACA;AACA;AACA,SAASF,IAAIA,CAAC9B,SAAS,EAAE;EACxB,IAAIA,SAAS,KAAK,GAAG,EAAE,OAAO,IAAI;EAClC,MAAMuC,CAAC,GAAGvC,SAAS,CAACwC,WAAW,CAAC,GAAG,CAAC;IACnCH,CAAC,GAAGrC,SAAS,CAACwC,WAAW,CAAC,IAAI,CAAC;EAChC,MAAMC,CAAC,GAAGF,CAAC,GAAG,CAAC,GAAGF,CAAC,GAAGA,CAAC,GAAG,CAAC,GAAGE,CAAC,GAAGA,CAAC,GAAGF,CAAC,GAAGA,CAAC,GAAGE,CAAC;EAC/C,IAAIE,CAAC,GAAG,CAAC,EAAE,OAAO,IAAI;EACtB,OAAOzC,SAAS,CAAC0C,MAAM,CAAC,CAAC,EAAED,CAAC,IAAI,CAAC,CAAC;AACnC;AAEAE,OAAO,CAAC7C,mBAAmB,GAAGA,mBAAmB;AACjD6C,OAAO,CAACZ,QAAQ,GAAGA,QAAQ;AAC3BY,OAAO,CAACb,IAAI,GAAGA,IAAI"},"metadata":{},"sourceType":"script","externalDependencies":[]}
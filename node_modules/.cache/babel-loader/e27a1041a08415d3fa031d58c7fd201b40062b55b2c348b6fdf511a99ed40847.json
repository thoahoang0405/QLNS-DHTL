{"ast":null,"code":"import { vModelText as _vModelText, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vShow as _vShow, toDisplayString as _toDisplayString, withModifiers as _withModifiers, withKeys as _withKeys, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-e9460fa8\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = [\"placeholder\", \"tabindex\"];\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"up-down\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"down\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"icon-down-bold\"\n})])], -1 /* HOISTED */));\nconst _hoisted_3 = {\n  class: \"drop-down\"\n};\nconst _hoisted_4 = {\n  class: \"drop-down-body\"\n};\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = {\n  class: \"icon-tick\"\n};\nconst _hoisted_7 = [\"id\"];\nconst _hoisted_8 = {\n  class: \"drop-down-name\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", {\n    class: \"m-combobox m-combobox-2\",\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.toggleCombobox && $options.toggleCombobox(...args)),\n    onKeyup: [_cache[4] || (_cache[4] = _withKeys((...args) => $options.selectItem && $options.selectItem(...args), [\"enter\"])), _cache[5] || (_cache[5] = _withKeys(_withModifiers((...args) => $options.keyDown && $options.keyDown(...args), [\"stop\"]), [\"down\"])), _cache[6] || (_cache[6] = _withKeys(_withModifiers((...args) => $options.keyUp && $options.keyUp(...args), [\"stop\"]), [\"up\"]))]\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    class: _normalizeClass([\"input\", $props.border]),\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.keyword = $event),\n    placeholder: this.placeholder,\n    tabindex: $props.tab,\n    onBlur: _cache[1] || (_cache[1] = (...args) => $options.onBlur && $options.onBlur(...args)),\n    onKeydown: _cache[2] || (_cache[2] = (...args) => $options.keyTab && $options.keyTab(...args)),\n    ref: $props.refName\n  }, null, 42 /* CLASS, PROPS, HYDRATE_EVENTS */, _hoisted_1), [[_vModelText, $data.keyword]]), _hoisted_2, _withDirectives(_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.dataItems, (item, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: _normalizeClass([\"drop-down-item\", item[$props.fieldName] == $data.currentItem[$props.fieldName] ? 'active' : '']),\n      onClick: _withModifiers($event => $options.onClickItem(item), [\"exact\", \"stop\"]),\n      key: item\n    }, [_createElementVNode(\"div\", _hoisted_6, [_withDirectives(_createElementVNode(\"div\", {\n      id: index,\n      class: \"tick\"\n    }, null, 8 /* PROPS */, _hoisted_7), [[_vShow, item[$props.fieldName] == $data.currentItem[$props.fieldName]]])]), _createElementVNode(\"div\", _hoisted_8, _toDisplayString(item[$props.fieldName]), 1 /* TEXT */)], 10 /* CLASS, PROPS */, _hoisted_5);\n  }), 128 /* KEYED_FRAGMENT */))])], 512 /* NEED_PATCH */), [[_vShow, $data.isShowCbb]])], 32 /* HYDRATE_EVENTS */);\n}","map":{"version":3,"names":["_createElementVNode","class","_createElementBlock","onClick","_cache","args","$options","toggleCombobox","onKeyup","selectItem","keyDown","keyUp","_normalizeClass","$props","border","$data","keyword","$event","placeholder","tabindex","tab","onBlur","onKeydown","keyTab","ref","refName","_hoisted_2","_hoisted_3","_hoisted_4","_Fragment","_renderList","dataItems","item","index","fieldName","currentItem","_withModifiers","onClickItem","key","_hoisted_6","id","_hoisted_8","_toDisplayString","isShowCbb"],"sources":["D:\\dhtl\\ptda\\UI\\QLNS-DHTL\\src\\components\\base\\BaseCombobox.vue"],"sourcesContent":["<template>\r\n  <div\r\n    class=\"m-combobox m-combobox-2\"\r\n    @click=\"toggleCombobox\"\r\n    @keyup.enter=\"selectItem\"\r\n    @keyup.down.stop=\"keyDown\"\r\n    @keyup.up.stop=\"keyUp\"\r\n  >\r\n    <input\r\n      class=\"input\"\r\n      v-model=\"keyword\"\r\n      :placeholder=\"this.placeholder\"\r\n      :tabindex=\"tab\"\r\n      :class=\"border\"\r\n      @blur=\"onBlur\"\r\n      @keydown=\"keyTab\"   \r\n     \r\n      :ref=\"refName\"\r\n     \r\n    />\r\n   \r\n    <div class=\"up-down\">\r\n      <div class=\"down\">\r\n        <div class=\"icon-down-bold\"></div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"drop-down\" v-show=\"isShowCbb\">\r\n      \r\n\r\n      <div class=\"drop-down-body\">\r\n        <div\r\n          v-for=\"(item,index) of dataItems\"\r\n          class=\"drop-down-item\"\r\n          :class=\"item[fieldName] == currentItem[fieldName] ? 'active' : ''\"\r\n          @click.exact.stop=\"onClickItem(item)\"\r\n          :key=\"item\"\r\n        >\r\n        <div class=\"icon-tick\">\r\n          <div :id=\"index\" v-show=\"item[fieldName] == currentItem[fieldName]\" class=\" tick\"></div>\r\n        </div>\r\n          <div class=\"drop-down-name\">{{ item[fieldName] }}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<!-- :class=\"item[fieldCode] == currentItem[fieldCode] ? 'active' : ''\" -->\r\n<script>\r\n\r\nexport default {\r\n  props: {\r\n    label: {\r\n      type: String,\r\n    },\r\n    items: {\r\n      type: Array,\r\n    },\r\n    fieldName: {\r\n      type: String,\r\n    },\r\n    fieldCode: {\r\n      type: String,\r\n    },\r\n    code: {\r\n      type: String,\r\n    },\r\n    tab: {\r\n      type: String,\r\n    },\r\n    border: {\r\n      type: String,\r\n    },\r\n    refName: {\r\n      type: String,\r\n    },\r\n    value: {\r\n      type: String,\r\n    },\r\n    Filter: {\r\n      type: Int16Array,\r\n    },\r\n\r\n  },\r\n  data() {\r\n    return {\r\n      currentItem: {}, // item hiện tại\r\n      isShowCbb: false, // show drop-down\r\n      placeholder: \"Nhập giá trị \", // playholder\r\n      dataItems: [],\r\n      keyword: \"\",\r\n      i: -1,\r\n      hOfItem: 35,\r\n      hOfBody: 135,\r\n      filter:0,\r\n    };\r\n  },\r\n  \r\n  methods: {\r\n    /**\r\n     * hàm xử lý sự kiện khi blur\r\n     *\r\n     */\r\n    onBlur() {\r\n      setTimeout(() => {\r\n        this.isShowCbb = false;\r\n      }, 200);\r\n      this.$emit(\"keyword\", this.keyword)\r\n      console.log(this.keyword);\r\n      this.$emit(\"onBlur\");\r\n    \r\n    },\r\n    /**\r\n     * hàm chọn item khi nhấn enter\r\n     *\r\n     */\r\n    keyTab() {\r\n      var code = event.keyCode || event.which;\r\n      if (code === 9) {\r\n        this.onFocus();\r\n      }\r\n    },\r\n    selectItem() {\r\n      this.$emit(\"selectedItem\", this.currentItem);\r\n      console.log(this.currentItem);\r\n      this.keyword = this.currentItem[this.fieldName];\r\n \r\n      this.isShowCbb = false;\r\n      this.i = 0;\r\n      this.$el.querySelector(\".input\").focus();\r\n      this.dataItems = this.items;\r\n    },\r\n    /**\r\n     * hàm click chọn item\r\n     *\r\n     */\r\n    onClickItem(item) {\r\n      this.currentItem = item;\r\n      this.selectItem();\r\n    },\r\n\r\n    toggleCombobox() {\r\n      this.isShowCbb = !this.isShowCbb;\r\n      if (this.isShowCbb == true) {\r\n        this.scrollItem((this.i - 1) * this.hOfItem);\r\n      }\r\n    },\r\n\r\n    scrollItem(position) {\r\n      if (position >= 0) {\r\n        this.$el.querySelector(\".drop-down-body\").scrollTo(0, position); //cuộn đến tọa độ (0,position)\r\n      }\r\n    },\r\n    keyDown() {\r\n      try {\r\n        if (!this.isShowCbb) {\r\n          this.isShowCbb = true;\r\n        } else {\r\n          this.i++;\r\n          if (this.i > this.dataItems.length - 1) {\r\n            this.i = this.dataItems.length - 1;\r\n          }\r\n          this.currentItem = this.dataItems[this.i];\r\n          this.scrollItem((this.i - 1) * this.hOfItem);\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n    keyUp() {\r\n      try {\r\n        if (this.i > 0) {\r\n          this.i--;\r\n          this.currentItem = this.dataItems[this.i];\r\n          this.scrollItem((this.i - 1) * this.hOfItem);\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * hàm xử lý sự kiện focus\r\n     *\r\n     */\r\n    onFocus() {\r\n      this.$el.querySelector(\".input\").select(); // khi focus thì select\r\n    },\r\n  },\r\n  created() {\r\n    // this.placeholder = this.label;\r\n  },\r\n  watch: {\r\n    Filter: function(value){\r\n      this.filter=value\r\n      console.log(value);\r\n    },\r\n    items: function (value) {\r\n      // nhận mảng item để hiển thị\r\n      this.dataItems = value;\r\n    },\r\n    value: function (vl) {\r\n      this.keyword = vl;\r\n    },\r\n    \r\n    keyword() {\r\n      if (this.keyword != this.currentItem[this.fieldName]) {\r\n        // this.isShowCbb = true;\r\n      } else if (this.keyword) {\r\n        // this.isShowCbb=!this.isShowCbb\r\n        this.dataItems.forEach((item) => {\r\n          let valueSearch = item[this.fieldName].trim().toLowerCase();\r\n          if (valueSearch.includes(this.keyword.trim().toLowerCase())) {\r\n            return item;\r\n          }\r\n        });\r\n      } else {\r\n        this.dataItems = this.items;\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    // xét giá trị ban đầu cho combobox\r\n    this.currentItem[this.fieldName] = this.code;\r\n\r\n    // this.item.filter((item,index)=>{\r\n    //   if(item[this.fieldCode]===this.currentItem[this.fieldCode]){\r\n    //     this.i=index\r\n    //   }\r\n    // })\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import url(../../css/base/combobox.css);\r\n.border-red{\r\n  border-color: #e03232 !important;\r\n}\r\ninput{\r\n  height: 35px !important;\r\n}\r\n.m-combobox-2 .drop-down .drop-down-body {\r\n  max-height: 110px;\r\n  height: -moz-fit-content;\r\n  height: fit-content;\r\n  overflow: auto;\r\n  overflow-x: hidden;\r\n}\r\n.icon-tick{\r\nwidth: 8px;\r\n}\r\n.m-combobox-2 .input {\r\n padding: 0 20px 0 32px;\r\n  width: 230px;\r\n  margin-top: 0px;\r\n  height: 36px;\r\n  box-sizing: border-box;\r\n  border-radius: 2.5px;\r\n}\r\n.m-combobox .icon {\r\n  position: absolute;\r\n  left: 6px;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  cursor: pointer;\r\n\r\n}\r\n.m-combobox .up-down {\r\n  position: absolute;\r\n  right: 19px;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  justify-content: center;\r\n}\r\n</style>\r\n"],"mappings":";;;gEAqBIA,mBAAA,CAIM;EAJDC,KAAK,EAAC;AAAS,I,aAClBD,mBAAA,CAEM;EAFDC,KAAK,EAAC;AAAM,I,aACfD,mBAAA,CAAkC;EAA7BC,KAAK,EAAC;AAAgB,G;;EAI1BA,KAAK,EAAC;AAAW;;EAGfA,KAAK,EAAC;AAAgB;;;EAQpBA,KAAK,EAAC;AAAW;;;EAGfA,KAAK,EAAC;AAAgB;;uBAxCnCC,mBAAA,CA4CM;IA3CJD,KAAK,EAAC,yBAAyB;IAC9BE,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,cAAA,IAAAD,QAAA,CAAAC,cAAA,IAAAF,IAAA,CAAc;IACrBG,OAAK,G,iDAAQF,QAAA,CAAAG,UAAA,IAAAH,QAAA,CAAAG,UAAA,IAAAJ,IAAA,CAAU,e,gEACNC,QAAA,CAAAI,OAAA,IAAAJ,QAAA,CAAAI,OAAA,IAAAL,IAAA,CAAO,yB,gEACTC,QAAA,CAAAK,KAAA,IAAAL,QAAA,CAAAK,KAAA,IAAAN,IAAA,CAAK;sBAErBL,mBAAA,CAWE;IAVAC,KAAK,EAAAW,eAAA,EAAC,OAAO,EAILC,MAAA,CAAAC,MAAM;+DAHLC,KAAA,CAAAC,OAAO,GAAAC,MAAA;IACfC,WAAW,OAAOA,WAAW;IAC7BC,QAAQ,EAAEN,MAAA,CAAAO,GAAG;IAEbC,MAAI,EAAAjB,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAe,MAAA,IAAAf,QAAA,CAAAe,MAAA,IAAAhB,IAAA,CAAM;IACZiB,SAAO,EAAAlB,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAiB,MAAA,IAAAjB,QAAA,CAAAiB,MAAA,IAAAlB,IAAA,CAAM;IAEfmB,GAAG,EAAEX,MAAA,CAAAY;8EAPGV,KAAA,CAAAC,OAAO,E,GAWlBU,UAIM,E,gBAEN1B,mBAAA,CAiBM,OAjBN2B,UAiBM,GAdJ3B,mBAAA,CAaM,OAbN4B,UAaM,I,kBAZJ1B,mBAAA,CAWM2B,SAAA,QAAAC,WAAA,CAVmBf,KAAA,CAAAgB,SAAS,GAAxBC,IAAI,EAACC,KAAK;yBADpB/B,mBAAA,CAWM;MATJD,KAAK,EAAAW,eAAA,EAAC,gBAAgB,EACdoB,IAAI,CAACnB,MAAA,CAAAqB,SAAS,KAAKnB,KAAA,CAAAoB,WAAW,CAACtB,MAAA,CAAAqB,SAAS;MAC/C/B,OAAK,EAAAiC,cAAA,CAAAnB,MAAA,IAAaX,QAAA,CAAA+B,WAAW,CAACL,IAAI;MAClCM,GAAG,EAAEN;QAERhC,mBAAA,CAEM,OAFNuC,UAEM,G,gBADJvC,mBAAA,CAAwF;MAAlFwC,EAAE,EAAEP,KAAK;MAAqDhC,KAAK,EAAC;mDAAjD+B,IAAI,CAACnB,MAAA,CAAAqB,SAAS,KAAKnB,KAAA,CAAAoB,WAAW,CAACtB,MAAA,CAAAqB,SAAS,G,KAEjElC,mBAAA,CAAuD,OAAvDyC,UAAuD,EAAAC,gBAAA,CAAxBV,IAAI,CAACnB,MAAA,CAAAqB,SAAS,kB;sEAdpBnB,KAAA,CAAA4B,SAAS,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}
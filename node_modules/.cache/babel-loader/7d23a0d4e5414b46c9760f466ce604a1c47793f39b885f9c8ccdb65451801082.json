{"ast":null,"code":"'use strict';\n\nvar SCALAR_TYPES = ['number', 'integer', 'string', 'boolean', 'null'];\nmodule.exports = function defFunc(ajv) {\n  defFunc.definition = {\n    type: 'array',\n    compile: function (keys, parentSchema, it) {\n      var equal = it.util.equal;\n      var scalar = getScalarKeys(keys, parentSchema);\n      return function (data) {\n        if (data.length > 1) {\n          for (var k = 0; k < keys.length; k++) {\n            var i,\n              key = keys[k];\n            if (scalar[k]) {\n              var hash = {};\n              for (i = data.length; i--;) {\n                if (!data[i] || typeof data[i] != 'object') continue;\n                var prop = data[i][key];\n                if (prop && typeof prop == 'object') continue;\n                if (typeof prop == 'string') prop = '\"' + prop;\n                if (hash[prop]) return false;\n                hash[prop] = true;\n              }\n            } else {\n              for (i = data.length; i--;) {\n                if (!data[i] || typeof data[i] != 'object') continue;\n                for (var j = i; j--;) {\n                  if (data[j] && typeof data[j] == 'object' && equal(data[i][key], data[j][key])) return false;\n                }\n              }\n            }\n          }\n        }\n        return true;\n      };\n    },\n    metaSchema: {\n      type: 'array',\n      items: {\n        type: 'string'\n      }\n    }\n  };\n  ajv.addKeyword('uniqueItemProperties', defFunc.definition);\n  return ajv;\n};\nfunction getScalarKeys(keys, schema) {\n  return keys.map(function (key) {\n    var properties = schema.items && schema.items.properties;\n    var propType = properties && properties[key] && properties[key].type;\n    return Array.isArray(propType) ? propType.indexOf('object') < 0 && propType.indexOf('array') < 0 : SCALAR_TYPES.indexOf(propType) >= 0;\n  });\n}","map":{"version":3,"names":["SCALAR_TYPES","module","exports","defFunc","ajv","definition","type","compile","keys","parentSchema","it","equal","util","scalar","getScalarKeys","data","length","k","i","key","hash","prop","j","metaSchema","items","addKeyword","schema","map","properties","propType","Array","isArray","indexOf"],"sources":["D:/dhtl/ptda/UI/QLNS-DHTL/node_modules/ajv-keywords/keywords/uniqueItemProperties.js"],"sourcesContent":["'use strict';\r\n\r\nvar SCALAR_TYPES = ['number', 'integer', 'string', 'boolean', 'null'];\r\n\r\nmodule.exports = function defFunc(ajv) {\r\n  defFunc.definition = {\r\n    type: 'array',\r\n    compile: function(keys, parentSchema, it) {\r\n      var equal = it.util.equal;\r\n      var scalar = getScalarKeys(keys, parentSchema);\r\n\r\n      return function(data) {\r\n        if (data.length > 1) {\r\n          for (var k=0; k < keys.length; k++) {\r\n            var i, key = keys[k];\r\n            if (scalar[k]) {\r\n              var hash = {};\r\n              for (i = data.length; i--;) {\r\n                if (!data[i] || typeof data[i] != 'object') continue;\r\n                var prop = data[i][key];\r\n                if (prop && typeof prop == 'object') continue;\r\n                if (typeof prop == 'string') prop = '\"' + prop;\r\n                if (hash[prop]) return false;\r\n                hash[prop] = true;\r\n              }\r\n            } else {\r\n              for (i = data.length; i--;) {\r\n                if (!data[i] || typeof data[i] != 'object') continue;\r\n                for (var j = i; j--;) {\r\n                  if (data[j] && typeof data[j] == 'object' && equal(data[i][key], data[j][key]))\r\n                    return false;\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        return true;\r\n      };\r\n    },\r\n    metaSchema: {\r\n      type: 'array',\r\n      items: {type: 'string'}\r\n    }\r\n  };\r\n\r\n  ajv.addKeyword('uniqueItemProperties', defFunc.definition);\r\n  return ajv;\r\n};\r\n\r\n\r\nfunction getScalarKeys(keys, schema) {\r\n  return keys.map(function(key) {\r\n    var properties = schema.items && schema.items.properties;\r\n    var propType = properties && properties[key] && properties[key].type;\r\n    return Array.isArray(propType)\r\n            ? propType.indexOf('object') < 0 && propType.indexOf('array') < 0\r\n            : SCALAR_TYPES.indexOf(propType) >= 0;\r\n  });\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}
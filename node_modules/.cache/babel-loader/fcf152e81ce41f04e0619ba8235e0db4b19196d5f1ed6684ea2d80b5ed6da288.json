{"ast":null,"code":"import \"core-js/modules/esnext.typed-array.to-reversed.js\";\nimport \"core-js/modules/esnext.typed-array.to-sorted.js\";\nimport \"core-js/modules/esnext.typed-array.with.js\";\nexport default {\n  props: {\n    label: {\n      type: String\n    },\n    items: {\n      type: Array\n    },\n    fieldName: {\n      type: String\n    },\n    fieldCode: {\n      type: String\n    },\n    code: {\n      type: String\n    },\n    tab: {\n      type: String\n    },\n    border: {\n      type: String\n    },\n    refName: {\n      type: String\n    },\n    value: {\n      type: String\n    },\n    Filter: {\n      type: Int16Array\n    }\n  },\n  data() {\n    return {\n      currentItem: {},\n      // item hiện tại\n      isShowCbb: false,\n      // show drop-down\n      placeholder: \"Nhập giá trị\",\n      // playholder\n      dataItems: [],\n      keyword: \"\",\n      i: -1,\n      hOfItem: 35,\n      hOfBody: 135,\n      filter: 0\n    };\n  },\n  methods: {\n    /**\r\n     * hàm xử lý sự kiện khi blur\r\n     *\r\n     */\n    onBlur() {\n      setTimeout(() => {\n        this.isShowCbb = false;\n      }, 200);\n      this.$emit(\"keyword\", this.keyword);\n      console.log(this.keyword);\n      this.$emit(\"onBlur\");\n    },\n    /**\r\n     * hàm chọn item khi nhấn enter\r\n     *\r\n     */\n    keyTab() {\n      var code = event.keyCode || event.which;\n      if (code === 9) {\n        this.onFocus();\n      }\n    },\n    selectItem() {\n      this.$emit(\"selectedItem\", this.currentItem);\n      console.log(this.currentItem);\n      this.keyword = this.currentItem[this.fieldName];\n      this.isShowCbb = false;\n      this.i = 0;\n      this.$el.querySelector(\".input\").focus();\n      this.dataItems = this.items;\n    },\n    /**\r\n     * hàm click chọn item\r\n     *\r\n     */\n    onClickItem(item) {\n      this.currentItem = item;\n      this.selectItem();\n    },\n    toggleCombobox() {\n      this.isShowCbb = !this.isShowCbb;\n      if (this.isShowCbb == true) {\n        this.scrollItem((this.i - 1) * this.hOfItem);\n      }\n    },\n    scrollItem(position) {\n      if (position >= 0) {\n        this.$el.querySelector(\".drop-down-body\").scrollTo(0, position); //cuộn đến tọa độ (0,position)\n      }\n    },\n\n    keyDown() {\n      try {\n        if (!this.isShowCbb) {\n          this.isShowCbb = true;\n        } else {\n          this.i++;\n          if (this.i > this.dataItems.length - 1) {\n            this.i = this.dataItems.length - 1;\n          }\n          this.currentItem = this.dataItems[this.i];\n          this.scrollItem((this.i - 1) * this.hOfItem);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    keyUp() {\n      try {\n        if (this.i > 0) {\n          this.i--;\n          this.currentItem = this.dataItems[this.i];\n          this.scrollItem((this.i - 1) * this.hOfItem);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    /**\r\n     * hàm xử lý sự kiện focus\r\n     *\r\n     */\n    onFocus() {\n      this.$el.querySelector(\".input\").select(); // khi focus thì select\n    }\n  },\n\n  created() {\n    // this.placeholder = this.label;\n  },\n  watch: {\n    Filter: function (value) {\n      this.filter = value;\n      console.log(value);\n    },\n    items: function (value) {\n      // nhận mảng item để hiển thị\n      this.dataItems = value;\n    },\n    value: function (vl) {\n      this.keyword = vl;\n    },\n    keyword() {\n      if (this.keyword != this.currentItem[this.fieldName]) {\n        // this.isShowCbb = true;\n      } else if (this.keyword) {\n        // this.isShowCbb=!this.isShowCbb\n        this.dataItems.forEach(item => {\n          let valueSearch = item[this.fieldName].trim().toLowerCase();\n          if (valueSearch.includes(this.keyword.trim().toLowerCase())) {\n            return item;\n          }\n        });\n      } else {\n        this.dataItems = this.items;\n      }\n    }\n  },\n  mounted() {\n    // xét giá trị ban đầu cho combobox\n    this.currentItem[this.fieldName] = this.code;\n\n    // this.item.filter((item,index)=>{\n    //   if(item[this.fieldCode]===this.currentItem[this.fieldCode]){\n    //     this.i=index\n    //   }\n    // })\n  }\n};","map":{"version":3,"names":["props","label","type","String","items","Array","fieldName","fieldCode","code","tab","border","refName","value","Filter","Int16Array","data","currentItem","isShowCbb","placeholder","dataItems","keyword","i","hOfItem","hOfBody","filter","methods","onBlur","setTimeout","$emit","console","log","keyTab","event","keyCode","which","onFocus","selectItem","$el","querySelector","focus","onClickItem","item","toggleCombobox","scrollItem","position","scrollTo","keyDown","length","error","keyUp","select","created","watch","vl","forEach","valueSearch","trim","toLowerCase","includes","mounted"],"sources":["D:\\dhtl\\ptda\\UI\\QLNS-DHTL\\src\\components\\base\\BaseCombobox.vue"],"sourcesContent":["<template>\r\n  <div\r\n    class=\"m-combobox m-combobox-2\"\r\n    @click=\"toggleCombobox\"\r\n    @keyup.enter=\"selectItem\"\r\n    @keyup.down.stop=\"keyDown\"\r\n    @keyup.up.stop=\"keyUp\"\r\n  >\r\n    <input\r\n      class=\"input\"\r\n      v-model=\"keyword\"\r\n      :placeholder=\"this.placeholder\"\r\n      :tabindex=\"tab\"\r\n      :class=\"border\"\r\n      @blur=\"onBlur\"\r\n      @keydown=\"keyTab\"   \r\n     \r\n      :ref=\"refName\"\r\n     \r\n    />\r\n   \r\n    <div class=\"up-down\">\r\n      <div class=\"down\">\r\n        <div class=\"icon icon-down-bold\"></div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"drop-down\"  v-show=\"isShowCbb\">\r\n        \r\n  \r\n        <div class=\"drop-down-body\">\r\n          <div\r\n            v-for=\"(item) of dataItems\"\r\n            class=\"drop-down-item \"\r\n            :class=\"item[fieldName] == currentItem[fieldName] ? 'active' : ''\"\r\n            @click.exact.stop=\"onClickItem(item)\"\r\n            :key=\"item\"\r\n          >\r\n        \r\n            <div class=\"drop-down-name\">   {{ item[fieldName] }}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  </div>\r\n</template>\r\n<!-- :class=\"item[fieldCode] == currentItem[fieldCode] ? 'active' : ''\" -->\r\n<script>\r\n\r\nexport default {\r\n  props: {\r\n    label: {\r\n      type: String,\r\n    },\r\n    items: {\r\n      type: Array,\r\n    },\r\n    fieldName: {\r\n      type: String,\r\n    },\r\n    fieldCode: {\r\n      type: String,\r\n    },\r\n    code: {\r\n      type: String,\r\n    },\r\n    tab: {\r\n      type: String,\r\n    },\r\n    border: {\r\n      type: String,\r\n    },\r\n    refName: {\r\n      type: String,\r\n    },\r\n    value: {\r\n      type: String,\r\n    },\r\n    Filter: {\r\n      type: Int16Array,\r\n    },\r\n\r\n  },\r\n  data() {\r\n    return {\r\n      currentItem: {}, // item hiện tại\r\n      isShowCbb: false, // show drop-down\r\n      placeholder: \"Nhập giá trị\", // playholder\r\n      dataItems: [],\r\n      keyword: \"\",\r\n      i: -1,\r\n      hOfItem: 35,\r\n      hOfBody: 135,\r\n      filter:0,\r\n    };\r\n  },\r\n  \r\n  methods: {\r\n      /**\r\n       * hàm xử lý sự kiện khi blur\r\n       *\r\n       */\r\n      onBlur() {\r\n        setTimeout(() => {\r\n          this.isShowCbb = false;\r\n        }, 200);\r\n        this.$emit(\"keyword\", this.keyword)\r\n        console.log(this.keyword);\r\n        this.$emit(\"onBlur\");\r\n      \r\n      },\r\n      /**\r\n       * hàm chọn item khi nhấn enter\r\n       *\r\n       */\r\n      keyTab() {\r\n        var code = event.keyCode || event.which;\r\n        if (code === 9) {\r\n          this.onFocus();\r\n        }\r\n      },\r\n      selectItem() {\r\n        this.$emit(\"selectedItem\", this.currentItem);\r\n        console.log(this.currentItem);\r\n        this.keyword = this.currentItem[this.fieldName];\r\n   \r\n        this.isShowCbb = false;\r\n        this.i = 0;\r\n        this.$el.querySelector(\".input\").focus();\r\n        this.dataItems = this.items;\r\n      },\r\n      /**\r\n       * hàm click chọn item\r\n       *\r\n       */\r\n      onClickItem(item) {\r\n        this.currentItem = item;\r\n        this.selectItem();\r\n      },\r\n  \r\n      toggleCombobox() {\r\n        this.isShowCbb = !this.isShowCbb;\r\n        if (this.isShowCbb == true) {\r\n          this.scrollItem((this.i - 1) * this.hOfItem);\r\n        }\r\n      },\r\n  \r\n      scrollItem(position) {\r\n        if (position >= 0) {\r\n          this.$el.querySelector(\".drop-down-body\").scrollTo(0, position); //cuộn đến tọa độ (0,position)\r\n        }\r\n      },\r\n      keyDown() {\r\n        try {\r\n          if (!this.isShowCbb) {\r\n            this.isShowCbb = true;\r\n          } else {\r\n            this.i++;\r\n            if (this.i > this.dataItems.length - 1) {\r\n              this.i = this.dataItems.length - 1;\r\n            }\r\n            this.currentItem = this.dataItems[this.i];\r\n            this.scrollItem((this.i - 1) * this.hOfItem);\r\n          }\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n      },\r\n      keyUp() {\r\n        try {\r\n          if (this.i > 0) {\r\n            this.i--;\r\n            this.currentItem = this.dataItems[this.i];\r\n            this.scrollItem((this.i - 1) * this.hOfItem);\r\n          }\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n      },\r\n  \r\n      /**\r\n       * hàm xử lý sự kiện focus\r\n       *\r\n       */\r\n      onFocus() {\r\n        this.$el.querySelector(\".input\").select(); // khi focus thì select\r\n      },\r\n    },\r\n    created() {\r\n      // this.placeholder = this.label;\r\n    },\r\n    watch: {\r\n      Filter: function(value){\r\n        this.filter=value\r\n        console.log(value);\r\n      },\r\n      items: function (value) {\r\n        // nhận mảng item để hiển thị\r\n        this.dataItems = value;\r\n      },\r\n      value: function (vl) {\r\n        this.keyword = vl;\r\n      },\r\n      \r\n      keyword() {\r\n        if (this.keyword != this.currentItem[this.fieldName]) {\r\n          // this.isShowCbb = true;\r\n        } else if (this.keyword) {\r\n          // this.isShowCbb=!this.isShowCbb\r\n          this.dataItems.forEach((item) => {\r\n            let valueSearch = item[this.fieldName].trim().toLowerCase();\r\n            if (valueSearch.includes(this.keyword.trim().toLowerCase())) {\r\n              return item;\r\n            }\r\n          });\r\n        } else {\r\n          this.dataItems = this.items;\r\n        }\r\n      },\r\n    },\r\n    mounted() {\r\n      // xét giá trị ban đầu cho combobox\r\n      this.currentItem[this.fieldName] = this.code;\r\n  \r\n      // this.item.filter((item,index)=>{\r\n      //   if(item[this.fieldCode]===this.currentItem[this.fieldCode]){\r\n      //     this.i=index\r\n      //   }\r\n      // })\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import url(../../css/base/combobox.css);\r\n.drop-down-name {\r\n    padding-left: 0px;\r\n}\r\n\r\n.tick{\r\n  padding-top: 4px;\r\n  margin-top: 5px;\r\n  margin-left: 7px;\r\n\r\n}\r\n.drop-down-item{\r\n  display: flex;\r\n}\r\n.border-red{\r\n  border-color: #e03232 !important;\r\n}\r\n.m-combobox-2 .drop-down .drop-down-body {\r\n    max-height: 110px;\r\n    height: -moz-fit-content;\r\n    height: fit-content;\r\n    overflow: auto;\r\n    overflow-x: hidden;\r\n}\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
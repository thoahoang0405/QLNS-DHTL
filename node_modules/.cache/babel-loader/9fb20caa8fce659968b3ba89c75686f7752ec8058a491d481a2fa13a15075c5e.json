{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, normalizeClass as _normalizeClass, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, vShow as _vShow, withKeys as _withKeys, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-e9460fa8\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  key: 0,\n  class: \"icon\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"icon-filter\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_3 = [_hoisted_2];\nconst _hoisted_4 = [\"placeholder\", \"readonly\"];\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"up-down\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"down\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"btn icon-down-bold\"\n})])], -1 /* HOISTED */));\nconst _hoisted_6 = {\n  class: \"drop-down\"\n};\nconst _hoisted_7 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass([\"m-combobox\", $props.hasIcon === 'false' ? 'm-combobox-mini' : '']),\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.openCombobox && $options.openCombobox(...args)),\n    onKeyup: [_cache[4] || (_cache[4] = _withKeys((...args) => $options.selectItem && $options.selectItem(...args), [\"enter\"])), _cache[5] || (_cache[5] = _withKeys(_withModifiers((...args) => $options.keyDown && $options.keyDown(...args), [\"stop\"]), [\"down\"])), _cache[6] || (_cache[6] = _withKeys(_withModifiers((...args) => $options.keyUp && $options.keyUp(...args), [\"stop\"]), [\"up\"]))]\n  }, [$props.hasFiltering ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, _hoisted_3)) : _createCommentVNode(\"v-if\", true), _withDirectives(_createElementVNode(\"input\", {\n    class: _normalizeClass([\"input\", $props.border]),\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.keyword = $event),\n    placeholder: $props.title,\n    onBlur: _cache[1] || (_cache[1] = (...args) => $options.onBlur && $options.onBlur(...args)),\n    readonly: !$props.hasFiltering,\n    onFocus: _cache[2] || (_cache[2] = (...args) => $options.onFocus && $options.onFocus(...args))\n  }, null, 42 /* CLASS, PROPS, HYDRATE_EVENTS */, _hoisted_4), [[_vModelText, $data.keyword]]), _hoisted_5, _withDirectives(_createElementVNode(\"div\", _hoisted_6, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.dataItems, item => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: _normalizeClass([\"drop-down-item\", item == $data.currentItem ? 'active' : '']),\n      key: item,\n      onClick: $event => $options.onClickItem(item)\n    }, _toDisplayString(item[$props.fieldName]), 11 /* TEXT, CLASS, PROPS */, _hoisted_7);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vShow, $data.isShow]])], 34 /* CLASS, HYDRATE_EVENTS */);\n}","map":{"version":3,"names":["class","_createElementVNode","_hoisted_2","_createElementBlock","_normalizeClass","$props","hasIcon","onClick","_cache","args","$options","openCombobox","onKeyup","selectItem","keyDown","keyUp","hasFiltering","_hoisted_1","_hoisted_3","border","type","$data","keyword","$event","placeholder","title","onBlur","readonly","onFocus","_hoisted_5","_hoisted_6","_Fragment","_renderList","dataItems","item","currentItem","key","onClickItem","fieldName","_hoisted_7","isShow"],"sources":["D:\\dhtl\\ptda\\QLNS\\ui\\src\\components\\base\\BaseCombobox.vue"],"sourcesContent":["<template>\r\n    <div\r\n      class=\"m-combobox\"\r\n      :class=\"hasIcon === 'false' ? 'm-combobox-mini' : ''\"\r\n      @click=\"openCombobox\"\r\n      @keyup.enter=\"selectItem\"\r\n      @keyup.down.stop=\"keyDown\"\r\n      @keyup.up.stop=\"keyUp\"\r\n    >\r\n      <div class=\"icon\" v-if=\"hasFiltering\">\r\n        <div class=\"icon-filter\"></div>\r\n      </div>\r\n  \r\n      <input\r\n        class=\"input\"\r\n        type=\"text\"\r\n        v-model=\"keyword\"\r\n        :placeholder=\"title\"\r\n        @blur=\"onBlur\"\r\n        :readonly=\"!hasFiltering\"\r\n        @focus=\"onFocus\"\r\n        :class=\"border\"\r\n      />\r\n  \r\n      <div class=\"up-down\">\r\n        <div class=\"down\">\r\n          <div class=\"btn icon-down-bold\"></div>\r\n        </div>\r\n      </div>\r\n  \r\n      <div class=\"drop-down\" v-show=\"isShow\">\r\n        <div\r\n          class=\"drop-down-item\"\r\n          v-for=\"item in dataItems\"\r\n          :key=\"item\"\r\n          :class=\"item == currentItem ? 'active' : ''\"\r\n          @click=\"onClickItem(item)\"\r\n        >\r\n          {{ item[fieldName] }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  export default {\r\n    props: {\r\n      hasFiltering: {\r\n        type: Boolean,\r\n        default: false,\r\n      },\r\n      hasIcon: {\r\n        type: String,\r\n        default: \"true\",\r\n      },\r\n      items: {\r\n        type: Array,\r\n        required: true,\r\n      },\r\n      title: {\r\n        type: String,\r\n      },\r\n      fieldName: {\r\n        type: String,\r\n        default: \"name\",\r\n      },\r\n      itemDefault: {\r\n        type: Boolean,\r\n      },\r\n      initValue: {\r\n        type: String,\r\n      },\r\n      border: {\r\n        type: String,\r\n      },\r\n    },\r\n    data() {\r\n      return {\r\n        i: -1, // lưu thứ tự item trong mảng items\r\n        isShow: false, // hiển thị danh sách drop-down\r\n        currentItem: {}, // item được chọn\r\n        heightOfItem: 35, // chiều cao của 1 item\r\n        heightOfBody: 135, // chiều cao chủa drop-down-body\r\n        dataItems: [], // mảng items hiển thị\r\n        keyword: \"\", // từ khóa để lọc\r\n      };\r\n    },\r\n    methods: {\r\n      /**\r\n       * hàm xử lý sự kiện khi Blur\r\n       * Author : (06/08/2022)\r\n       */\r\n      onBlur() {\r\n        setTimeout(() => {\r\n          this.isShow = false;\r\n        }, 200);\r\n      },\r\n      /**\r\n       * khởi tạo hàm mở combobox\r\n       * Author: TTDuc (06/08/2022)\r\n       */\r\n      openCombobox() {\r\n        this.isShow = !this.isShow;\r\n        this.scrollToCurentItem();\r\n      },\r\n      /**\r\n       * hàm thực hiện chọn 1 items\r\n       * Author: TTDuc (24/08/2022)\r\n       */\r\n      onClickItem(item) {\r\n        try {\r\n          this.currentItem = item;\r\n          this.$emit(\"comboboxSelectedItem\", this.currentItem);\r\n          this.keyword = this.currentItem[this.fieldName];\r\n        } catch (err) {\r\n          console.log(err);\r\n        }\r\n      },\r\n      /**\r\n       * hàm khởi tạo sự kiện keyDown\r\n       * Author: TTDuc (13/08/2022)\r\n       */\r\n      keyDown() {\r\n        try {\r\n          if (!this.isShow) {\r\n            this.isShow = true;\r\n          } else {\r\n            this.i++;\r\n            if (this.i > this.dataItems.length - 1) {\r\n              this.i = this.dataItems.length - 1;\r\n            }\r\n            this.currentItem = this.dataItems[this.i];\r\n            this.scrollTrackingItem((this.i - 1) * this.heightOfItem);\r\n          }\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n      },\r\n      /**\r\n       * hàm xử lý sự kiện key up\r\n       * Author : TTDuc (13/12/2022)\r\n       */\r\n      keyUp() {\r\n        try {\r\n          if (this.i > 0) {\r\n            this.i--;\r\n            this.currentItem = this.dataItems[this.i];\r\n            this.scrollTrackingItem((this.i - 1) * this.heightOfItem);\r\n          }\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n      },\r\n      /**\r\n       * hàm xử lý sự kiện scrollHeight\r\n       * Author: TTDuc (13/8/2022)\r\n       */\r\n      scrollTrackingItem(position) {\r\n        if (position >= 0) {\r\n          this.$el.querySelector(\".drop-down\").scrollTo(0, position);\r\n        }\r\n      },\r\n      /**\r\n       * hàm xử lý scroll đến item đã được chọn\r\n       * Author : TTDuc (06/08/2022)\r\n       */\r\n      scrollToCurentItem() {\r\n        this.items.filter((item, index) => {\r\n          if (item === this.currentItem) {\r\n            this.$el\r\n              .querySelector(\".drop-down\")\r\n              .scrollTo(0, index * this.heightOfItem);\r\n          }\r\n        });\r\n      },\r\n      /**\r\n       * hàm chọn item khi nhấn enter\r\n       * Author : TTDuc(07/09/2022)\r\n       */\r\n      selectItem() {\r\n        this.$emit(\"comboboxSelectedItem\", this.currentItem);\r\n        this.keyword = this.currentItem[this.fieldName];\r\n        this.isShow = false;\r\n  \r\n        this.i = 0;\r\n        this.$el.querySelector(\".input\").focus();\r\n        this.dataItems = this.items;\r\n      },\r\n      /**\r\n       * hàm thực hiện lọc\r\n       * Author: TTDuc (07/08/2022)\r\n       */\r\n      filter() {\r\n        if (this.hasFiltering && this.keyword != \"\") {\r\n          this.dataItems = this.items.filter((item) => {\r\n            let valueFilter = item[this.fieldName].trim().toLowerCase();\r\n            if (valueFilter.includes(this.keyword.trim().toLowerCase())) {\r\n              return item;\r\n            }\r\n          });\r\n        } else {\r\n          this.dataItems = this.items;\r\n        }\r\n      },\r\n      /**\r\n       * hàm thực hiện chọn tất cả text\r\n       * Author: TTDuc (07/09/2022)\r\n       */\r\n      onFocus() {\r\n        try {\r\n          if (this.hasFiltering) {\r\n            this.$el.querySelector(\".input\").select();\r\n          }\r\n        } catch (err) {\r\n          console.log(err);\r\n        }\r\n      },\r\n    },\r\n    created() {\r\n      // kiểm tra nếu cần có item mặc định thì lấy item 0\r\n      if (this.items && this.itemDefault) {\r\n        this.currentItem = this.items[0];\r\n      }\r\n  \r\n      for (const item of this.items) {\r\n        if (item[this.fieldName] == this.initValue) {\r\n          this.currentItem = item;\r\n        }\r\n      }\r\n  \r\n      if (!this.hasFiltering) {\r\n        this.keyword = this.currentItem[this.fieldName];\r\n      }\r\n  \r\n      this.dataItems = this.items;\r\n    },\r\n    watch: {\r\n      keyword() {\r\n        if (this.keyword == \"\") {\r\n          this.isShow = false;\r\n          this.currentItem = {};\r\n          this.$emit(\"comboboxSelectedItem\", this.currentItem);\r\n        }\r\n  \r\n        this.filter();\r\n      },\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  @import url(../../css/layout/combobox.css);\r\n  </style>\r\n  "],"mappings":";;;;EASWA,KAAK,EAAC;;gEACTC,mBAAA,CAA+B;EAA1BD,KAAK,EAAC;AAAa;oBAAxBE,UAA+B,C;;gEAcjCD,mBAAA,CAIM;EAJDD,KAAK,EAAC;AAAS,I,aAClBC,mBAAA,CAEM;EAFDD,KAAK,EAAC;AAAM,I,aACfC,mBAAA,CAAsC;EAAjCD,KAAK,EAAC;AAAoB,G;;EAI9BA,KAAK,EAAC;AAAW;;;uBA7BxBG,mBAAA,CAwCM;IAvCJH,KAAK,EAAAI,eAAA,EAAC,YAAY,EACVC,MAAA,CAAAC,OAAO;IACdC,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,YAAA,IAAAD,QAAA,CAAAC,YAAA,IAAAF,IAAA,CAAY;IACnBG,OAAK,G,iDAAQF,QAAA,CAAAG,UAAA,IAAAH,QAAA,CAAAG,UAAA,IAAAJ,IAAA,CAAU,e,gEACNC,QAAA,CAAAI,OAAA,IAAAJ,QAAA,CAAAI,OAAA,IAAAL,IAAA,CAAO,yB,gEACTC,QAAA,CAAAK,KAAA,IAAAL,QAAA,CAAAK,KAAA,IAAAN,IAAA,CAAK;MAEGJ,MAAA,CAAAW,YAAY,I,cAApCb,mBAAA,CAEM,OAFNc,UAEM,EAAAC,UAAA,K,mDAENjB,mBAAA,CASE;IARAD,KAAK,EAAAI,eAAA,EAAC,OAAO,EAOLC,MAAA,CAAAc,MAAM;IANdC,IAAI,EAAC,MAAM;+DACFC,KAAA,CAAAC,OAAO,GAAAC,MAAA;IACfC,WAAW,EAAEnB,MAAA,CAAAoB,KAAK;IAClBC,MAAI,EAAAlB,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAgB,MAAA,IAAAhB,QAAA,CAAAgB,MAAA,IAAAjB,IAAA,CAAM;IACZkB,QAAQ,GAAGtB,MAAA,CAAAW,YAAY;IACvBY,OAAK,EAAApB,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAkB,OAAA,IAAAlB,QAAA,CAAAkB,OAAA,IAAAnB,IAAA,CAAO;8EAJNY,KAAA,CAAAC,OAAO,E,GAQlBO,UAIM,E,gBAEN5B,mBAAA,CAUM,OAVN6B,UAUM,I,kBATJ3B,mBAAA,CAQM4B,SAAA,QAAAC,WAAA,CANWX,KAAA,CAAAY,SAAS,EAAjBC,IAAI;yBAFb/B,mBAAA,CAQM;MAPJH,KAAK,EAAAI,eAAA,EAAC,gBAAgB,EAGd8B,IAAI,IAAIb,KAAA,CAAAc,WAAW;MAD1BC,GAAG,EAAEF,IAAI;MAET3B,OAAK,EAAAgB,MAAA,IAAEb,QAAA,CAAA2B,WAAW,CAACH,IAAI;wBAErBA,IAAI,CAAC7B,MAAA,CAAAiC,SAAS,iCAAAC,UAAA;oEARUlB,KAAA,CAAAmB,MAAM,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}